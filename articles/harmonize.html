<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>data vignette • traitdataform</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">traitdataform</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/traitdataform.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/harmonize.html">data vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fdschneider/traitdataform">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>data vignette</h1>
                        <h4 class="author">Florian D. Schneider</h4>
            
            <h4 class="date">12 Oktober 2017</h4>
          </div>

    
    
<div class="contents">
<p>This vignette of package traitdataform describes how to work with the data sources that have been added to this package. There are three types of data access:</p>
<ul>
<li>
<strong>independent datasets</strong> from data publications and public sources (figshare, data dryad) that are extracted and harmonized to be compliant with the trait data standard.</li>
<li>
<strong>data bases</strong> that are accessible via the package ‘traits’ by Scott Chamberlain and ‘tr8’ by Gionata Bocci and harmonized into the trait data standard.</li>
<li>
<strong>BExIS</strong> hosts several datasets containing trait data. They can be accessed using the function … if valid credentials can be provided.</li>
</ul>
<div id="tr8" class="section level1">
<h1 class="hasAnchor">
<a href="#tr8" class="anchor"></a>TR8</h1>
<p>The package ‘TR8’ provides programmatical access to multiple databases, partly via the API of the database hosting services and partly via direct download and filtering. The package only partly harmonizes trait names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"traitdataform"</span>)</code></pre></div>
<pre><code>## Warning: replacing previous import 'plyr::rename' by 'reshape::rename' when
## loading 'traitdataform'</code></pre>
<pre><code>## Warning: replacing previous import 'data.table::melt' by 'reshape::melt'
## when loading 'traitdataform'</code></pre>
<pre><code>## Warning: replacing previous import 'plyr::round_any' by
## 'reshape::round_any' when loading 'traitdataform'</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"TR8"</span>)</code></pre></div>
<pre><code>## 
##          Please remember to always cite the appropriate sources of traits data (see ?bib).
## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_species &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Salix alba"</span>,<span class="st">"Populus nigra"</span>, <span class="st">"Populus alba"</span>, <span class="st">"Humulus lupulus"</span>)
data1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/TR8/topics/tr8">tr8</a></span>(my_species, <span class="kw">c</span>(<span class="st">"seed_wght"</span> , <span class="st">"seed_mass"</span>, <span class="st">"seed_mas_cal"</span>, <span class="st">"SeedMass"</span>))
test &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/TR8/topics/Tr8-class">extract_traits</a></span>(data1) <span class="co">#reformat into data.frame object</span>
test &lt;-<span class="st"> </span><span class="kw">sapply</span>(test, <span class="cf">function</span>(x) <span class="kw">as.numeric</span>(<span class="kw">as.character</span>(x))) <span class="co"># turn missing values into true NA</span>
test &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(test)
test<span class="op">$</span>species &lt;-<span class="st">  </span><span class="kw">as.factor</span>(my_species) <span class="co"># adds species names as an own column (not row-names)</span>

dataset1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as.traitdata.html">as.traitdata</a></span>(test, 
                         <span class="dt">taxa =</span> <span class="st">"species"</span>,
                         <span class="dt">traits =</span> TR8<span class="op">::</span>available_tr8<span class="op">$</span>short_code
                         )</code></pre></div>
<pre><code>## Input is taken to be a species -- trait matrix. If this is not the case, please provide parameters!</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## how to maintain databse id and bibliographic reference? 

<span class="kw"><a href="../reference/standardize.taxonomy.html">standardize.taxonomy</a></span>(dataset1)</code></pre></div>
<pre><code>## 
## Retrieving data for taxon 'Humulus lupulus'</code></pre>
<pre><code>## 
## Retrieving data for taxon 'Populus alba'</code></pre>
<pre><code>## 
## Retrieving data for taxon 'Populus nigra'</code></pre>
<pre><code>## 
## Retrieving data for taxon 'Salix alba'</code></pre>
<pre><code>##    scientificName traitName traitValue scientificNameStd taxonRank
## 1 Humulus lupulus seed_wght   0.120000   Humulus lupulus   species
## 2 Humulus lupulus seed_mass   0.120000   Humulus lupulus   species
## 3    Populus alba seed_wght   0.810000      Populus alba   species
## 4    Populus alba seed_mass   0.800000      Populus alba   species
## 5   Populus nigra seed_wght   0.120000     Populus nigra   species
## 6   Populus nigra seed_mass   0.120000     Populus nigra   species
## 7      Salix alba seed_mass   4.112583        Salix alba   species
##          order                             taxonID measurementID warnings
## 1      Rosales http://www.gbif.org/species/2984535             3         
## 2      Rosales http://www.gbif.org/species/2984535             7         
## 3 Malpighiales http://www.gbif.org/species/3040233             2         
## 4 Malpighiales http://www.gbif.org/species/3040233             6         
## 5 Malpighiales http://www.gbif.org/species/3040227             1         
## 6 Malpighiales http://www.gbif.org/species/3040227             5         
## 7   Enterogona http://www.gbif.org/species/7882712             4         
## 
## This trait-dataset contains 4 traits for 4 taxa ( 7 measurements in total).
## 
## [1]:</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#tr8">TR8</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Florian D. Schneider.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
