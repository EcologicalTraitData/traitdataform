<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Standardize format of traitdata — as.traitdata â€¢ traitdataform</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">traitdataform</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/traitdataform.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fdschneider/traitdataform">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Standardize format of traitdata</h1>
    </div>

    
    <p>Turns wide-table formats (species-traits matrix and occurrence table) into
long-table format. As input, the function requires information about which
columns contain traits, given as a list of trait-names, and which column
contains the taxon name. For tables containing repeated measurements of
traits within the same taxon, an occurrenceID should be given or will be
created.</p>
    

    <pre class="usage"><span class='fu'>as.traitdata</span>(<span class='no'>x</span>, <span class='kw'>traits</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>traits</span>, <span class='kw'>taxa</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>taxa</span>,
  <span class='kw'>individuals</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>individuals</span>, <span class='kw'>occurrences</span> <span class='kw'>=</span> <span class='no'>individuals</span>,
  <span class='kw'>datasetID</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>datasetID</span>,
  <span class='kw'>measurements</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>measurements</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>units</span>,
  <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>keep</span>, <span class='kw'>drop</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>id.vars</span> <span class='kw'>=</span> <span class='fu'>names</span>(<span class='no'>x</span>)[<span class='fu'>names</span>(<span class='no'>x</span>) <span class='kw'>%in%</span> <span class='no'>keep</span> <span class='kw'>&amp;</span> !<span class='fu'>names</span>(<span class='no'>x</span>) <span class='kw'>%in%</span> <span class='no'>drop</span>],
  <span class='kw'>mutate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>thesaurus</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>thesaurus</span>,
  <span class='kw'>metadata</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>x</span>)$<span class='no'>metadata</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>data.frame object, containing at least a column of taxa, and one or
more columns of trait measurements.</p></td>
    </tr>
    <tr>
      <th>traits</th>
      <td><p>a vector of column names containing traits.</p></td>
    </tr>
    <tr>
      <th>taxa</th>
      <td><p>the name of the column containing taxon names.</p></td>
    </tr>
    <tr>
      <th>individuals</th>
      <td><p>identical to <code>occurrence</code>. (old term kept for
clarification)</p></td>
    </tr>
    <tr>
      <th>occurrences</th>
      <td><p>either a column name containing identifiers for each
individual specimen on which several traits were measured, i.e. an
occurrence of this taxon, or a vector of occurrence identifiers which must
be of the same length as the number of rows of the table. See 'Details'.</p></td>
    </tr>
    <tr>
      <th>datasetID</th>
      <td><p>a unique name for this dataset (optional). Will be prepended
to the occurrence ID and measurement ID.</p></td>
    </tr>
    <tr>
      <th>measurements</th>
      <td><p>either a column name containing identifiers for each
individual measurement, or a vector of measurement identifiers. This
applies, if single trait measurements span across multiple columns of data,
e.g. multivariate traits like quantitative measures of chemical compounds,
wavelengths or x-y-z coordinates. In most cases, a measurementID will link
the data across rows in the longtable format. Make sure that the traitnames
given reflect the different dimensions of the trait measurement. If
<code>measurement</code> remains blank, sequential identifiers will be auto-generated
for each measured value.</p></td>
    </tr>
    <tr>
      <th>units</th>
      <td><p>a single character string or named vector giving the units that
apply to the traits. If only one unit type is given, it will be applied to
all traits.</p></td>
    </tr>
    <tr>
      <th>keep</th>
      <td><p>a vector or named vector containing the names of the input
columns to be kept in the output. Vector names will be used to rename the
columns. It is recommended to use accepted column names of the traitdata
standard for renaming!</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>a vector acting as the inverse of <code>keep</code>. All columns listed will
be removed from the output dataset.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical defaults to <code>TRUE</code>. If <code>FALSE</code>, all measured Values
containing NA will be kept in the output table. This is not reccomended for
most data.</p></td>
    </tr>
    <tr>
      <th>metadata</th>
      <td><p>a list of class metadata, as created by function
<code><a href='as.metadata.html'>as.metadata()</a></code>. Metadata will be added as attributes to the data table.
Possible parameters to the function call are: <code>rightsHolder</code>,
<code>bibliographicCitation</code>, <code>license</code>, <code>author</code>, <code>datasetID</code>, <code>datasetName</code>,
<code>version</code>. (see 'Details')</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>occurrence</code> is left blank, the script will check for the
structure of the input table. If several entries are given for the same
taxon, it assumes that input is an occurrence table and assigns
identifiers.</p>
<p>Metadata will be stored as attributes to the data frame and can be accessed
via <code>attributes()</code>. It is not necessary but highly recommended to provide
metadata when working with multiple trait data files. When appending
datasets using <code>rbind()</code>, the metadata information will be added as
additional columns and dataset attribution will be listed in attributes.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># species-trait matrix: </span>

<span class='fu'><a href='pulldata.html'>pulldata</a></span>(<span class='no'>carabids</span>)</div><div class='output co'>#&gt; <span class='error'>Error in source(system.file("extdata", paste0(x, ".R"), package = "traitdataform")): cannot coerce type 'closure' to vector of type 'character'</span></div><div class='input'>
<span class='no'>dataset1</span> <span class='kw'>&lt;-</span> <span class='fu'>as.traitdata</span>(<span class='no'>carabids</span>,
  <span class='kw'>taxa</span> <span class='kw'>=</span> <span class='st'>"name_correct"</span>,
  <span class='kw'>traits</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"body_length"</span>, <span class='st'>"antenna_length"</span>, <span class='st'>"metafemur_length"</span>),
  <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"mm"</span>,
  <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='kw'>basisOfRecordDecription</span> <span class='kw'>=</span> <span class='st'>"source_measurement"</span>, <span class='kw'>measurementRemark</span> <span class='kw'>=</span> <span class='st'>"note"</span>)
  )</div><div class='output co'>#&gt; <span class='message'>Input is taken to be a species -- trait matrix. If this is not the case, please provide parameters!</span></div><div class='input'>
<span class='co'># occurrence table: </span>

<span class='fu'><a href='pulldata.html'>pulldata</a></span>(<span class='st'>"heteroptera_raw"</span>)</div><div class='output co'>#&gt; loading dataset 'heteroptera_raw' from original data source! 
#&gt;  When using this data, please cite the original publication: 
#&gt; Gossner MM, Simons NK, Höck L and Weisser WW (2015). <U+0093>Morphometric
#&gt; measures of Heteroptera sampled in grasslands across three regions of
#&gt; Germany.<U+0094> _Ecology_, *96*, pp. 1154. doi: 10.1890/14-2159.1 (URL:
#&gt; http://doi.org/10.1890/14-2159.1).
#&gt; The dataset 'heteroptera_raw' is now available for use! </div><div class='input'>
<span class='no'>dataset2</span> <span class='kw'>&lt;-</span> <span class='fu'>as.traitdata</span>(<span class='no'>heteroptera_raw</span>,
  <span class='kw'>taxa</span> <span class='kw'>=</span> <span class='st'>"SpeciesID"</span>,
  <span class='kw'>traits</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Body_length"</span>, <span class='st'>"Body_width"</span>, <span class='st'>"Body_height"</span>, <span class='st'>"Thorax_length"</span>,
    <span class='st'>"Thorax_width"</span>, <span class='st'>"Head_width"</span>, <span class='st'>"Eye_width"</span>, <span class='st'>"Antenna_Seg1"</span>, <span class='st'>"Antenna_Seg2"</span>,
    <span class='st'>"Antenna_Seg3"</span>, <span class='st'>"Antenna_Seg4"</span>, <span class='st'>"Antenna_Seg5"</span>, <span class='st'>"Front.Tibia_length"</span>,
    <span class='st'>"Mid.Tibia_length"</span>, <span class='st'>"Hind.Tibia_length"</span>, <span class='st'>"Front.Femur_length"</span>,
    <span class='st'>"Hind.Femur_length"</span>, <span class='st'>"Front.Femur_width"</span>, <span class='st'>"Hind.Femur_width"</span>,
    <span class='st'>"Rostrum_length"</span>, <span class='st'>"Rostrum_width"</span>, <span class='st'>"Wing_length"</span>, <span class='st'>"Wing_widt"</span>),
  <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>"mm"</span>,
  <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='kw'>sex</span> <span class='kw'>=</span> <span class='st'>"Sex"</span>, <span class='kw'>references</span> <span class='kw'>=</span> <span class='st'>"Source"</span>, <span class='kw'>lifestage</span> <span class='kw'>=</span> <span class='st'>"Wing_development"</span>),
  <span class='kw'>metadata</span> <span class='kw'>=</span> <span class='fu'><a href='as.metadata.html'>as.metadata</a></span>(
    <span class='kw'>author</span> <span class='kw'>=</span> <span class='st'>"Gossner MM, Simons NK, Höck L and Weisser WW"</span>,
    <span class='kw'>datasetName</span> <span class='kw'>=</span> <span class='st'>"Morphometric traits Heteroptera"</span>,
    <span class='kw'>bibliographicCitation</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='no'>heteroptera_raw</span>)$<span class='no'>citeAs</span>,
    <span class='kw'>license</span> <span class='kw'>=</span> <span class='st'>"http://creativecommons.org/publicdomain/zero/1.0/"</span>
    )
)</div><div class='output co'>#&gt; <span class='message'>it seems you are providing repeated measures of traits on multiple specimens of the same species (i.e. an occurrence table)! Sequential identifiers for the occuences will be added. If your dataset contains user-defined occurrenceIDs you may specify the column name in parameter 'occurrences'. </span></div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Florian D. Schneider.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
