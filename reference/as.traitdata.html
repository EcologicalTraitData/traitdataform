<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Turns wide-table formats (species-traits matrix and occurrence table) into
long-table format. As input, the function requires information about which
columns contain traits, given as a list of trait-names, and which column
contains the taxon name. For tables containing repeated measurements of
traits within the same taxon, an occurrenceID should be given or will be
created."><title>Standardize format of traitdata — as.traitdata • traitdataform</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Standardize format of traitdata — as.traitdata"><meta property="og:description" content="Turns wide-table formats (species-traits matrix and occurrence table) into
long-table format. As input, the function requires information about which
columns contain traits, given as a list of trait-names, and which column
contains the taxon name. For tables containing repeated measurements of
traits within the same taxon, an occurrenceID should be given or will be
created."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">traitdataform</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/traitdataform.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ecologicaltraitdata/traitdataform/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Standardize format of traitdata</h1>
      <small class="dont-index">Source: <a href="https://github.com/ecologicaltraitdata/traitdataform/blob/HEAD/R/as.traitdata.R" class="external-link"><code>R/as.traitdata.R</code></a></small>
      <div class="d-none name"><code>as.traitdata.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Turns wide-table formats (species-traits matrix and occurrence table) into
long-table format. As input, the function requires information about which
columns contain traits, given as a list of trait-names, and which column
contains the taxon name. For tables containing repeated measurements of
traits within the same taxon, an occurrenceID should be given or will be
created.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">as.traitdata</span><span class="op">(</span>
  <span class="va">x</span>,
  traits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">traits</span>,
  taxa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">taxa</span>,
  occurrences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">occurrences</span>,
  datasetID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">datasetID</span>,
  measurements <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">measurements</span>,
  units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">units</span>,
  keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">keep</span>,
  drop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">drop</span>,
  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,
  id.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">keep</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">drop</span><span class="op">]</span>,
  thesaurus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">thesaurus</span>,
  metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">$</span><span class="va">metadata</span>,
  longtable <span class="op">=</span> <span class="cn">TRUE</span>,
  conformsTo <span class="op">=</span> <span class="st">"v0.10"</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>data.frame object, containing at least a column of taxa, and one or
more columns of trait measurements.</p></dd>
<dt>traits</dt>
<dd><p>a vector of column names containing traits.</p></dd>
<dt>taxa</dt>
<dd><p>the name of the column containing taxon names.</p></dd>
<dt>occurrences</dt>
<dd><p>either a column name containing identifiers for each
individual specimen on which several traits were measured, i.e. an
occurrence of this taxon, or a vector of occurrence identifiers which must
be of the same length as the number of rows of the table. See 'Details'.</p></dd>
<dt>datasetID</dt>
<dd><p>a unique name for this dataset (optional). Will be prepended
to the occurrence ID and measurement ID.</p></dd>
<dt>measurements</dt>
<dd><p>either a column name containing identifiers for each
individual measurement, or a vector of measurement identifiers. This
applies, if single trait measurements span across multiple columns of data,
e.g. multivariate traits like quantitative measures of chemical compounds,
wavelengths or x-y-z coordinates. In most cases, a measurementID will link
the data across rows in the longtable format. Make sure that the traitnames
given reflect the different dimensions of the trait measurement. If
<code>measurement</code> remains blank, sequential identifiers will be auto-generated
for each measured value.</p></dd>
<dt>units</dt>
<dd><p>a single character string or named vector giving the units that
apply to the traits. If only one unit type is given, it will be applied to
all traits.</p></dd>
<dt>keep</dt>
<dd><p>a vector or named vector containing the names of the input
columns to be kept in the output. Vector names will be used to rename the
columns. It is recommended to use accepted column names of the traitdata
standard for renaming!</p></dd>
<dt>drop</dt>
<dd><p>a vector acting as the inverse of <code>keep</code>. All columns listed will
be removed from the output dataset.</p></dd>
<dt>na.rm</dt>
<dd><p>logical defaults to <code>TRUE</code>. If <code>FALSE</code>, all measured Values
containing NA will be kept in the output table. This is not reccomended for
most data.</p></dd>
<dt>id.vars</dt>
<dd><p>a vector of column names to return. Autogenerated from input
column names and 'keep' and 'drop'.</p></dd>
<dt>thesaurus</dt>
<dd><p>an object of class 'thesaurus' as created by function
<code><a href="as.thesaurus.html">as.thesaurus()</a></code>. If provided, this will superimpose trait names provided
in argument <code>traits</code>. The thesaurus will be appended as an attribute and
can be revisited by calling <code>attributes(x)$thesaurus</code>.</p></dd>
<dt>metadata</dt>
<dd><p>a list of class metadata, as created by function
<code><a href="as.metadata.html">as.metadata()</a></code>. Metadata will be added as attributes to the data table.
Possible parameters to the function call are: <code>rightsHolder</code>,
<code>bibliographicCitation</code>, <code>license</code>, <code>author</code>, <code>datasetID</code>, <code>datasetName</code>,
<code>version</code>. (see 'Details')</p></dd>
<dt>longtable</dt>
<dd><p>logical, defaults to <code>TRUE</code>. If <code>FALSE</code>, data will not be
converted into lontable format, but remain in widetable format as provided.
Note that any columns not indicated in arguments <code>traits</code>, <code>keep</code>, <code>units</code>,
<code>taxa</code>, <code>occurrences</code> will be dropped from the output.</p></dd>
<dt>conformsTo</dt>
<dd><p>version of the Ecological Trait-data Standard to which the
data conform. Default procedures return data conform to v0.10. If
<code>conformsTo = "v0.9"</code>, data output will be converted to Ecological
Trait-data Standard v0.9.</p></dd>
<dt>...</dt>
<dd><p>other arguments, passed on to print function.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class 'traitdata'.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>occurrences</code> is left blank, the script will check for the
structure of the input table. If several entries are given for the same
taxon, it assumes that input is an occurrence table, i.e. with multiple
observations of a single taxon,  and assigns identifiers.</p>
<p>Metadata will be stored as attributes to the data frame and can be accessed
via <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code>. It is not necessary but highly recommended to provide
metadata when working with multiple trait data files. When appending
datasets using <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code>, the metadata information will be added as
additional columns and dataset attribution will be listed in attributes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># species-trait matrix:</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="pulldata.html">pulldata</a></span><span class="op">(</span><span class="st">"carabids"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">dataset1</span> <span class="op">&lt;-</span> <span class="fu">as.traitdata</span><span class="op">(</span><span class="va">carabids</span>,</span>
<span class="r-in">  taxa <span class="op">=</span> <span class="st">"name_correct"</span>,</span>
<span class="r-in">  traits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"body_length"</span>, <span class="st">"antenna_length"</span>, <span class="st">"metafemur_length"</span><span class="op">)</span>,</span>
<span class="r-in">  units <span class="op">=</span> <span class="st">"mm"</span>,</span>
<span class="r-in">  keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>basisOfRecordDecription <span class="op">=</span> <span class="st">"source_measurement"</span>, measurementRemark <span class="op">=</span> <span class="st">"note"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># occurrence table:</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="pulldata.html">pulldata</a></span><span class="op">(</span><span class="st">"heteroptera_raw"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">dataset2</span> <span class="op">&lt;-</span> <span class="fu">as.traitdata</span><span class="op">(</span><span class="va">heteroptera_raw</span>,</span>
<span class="r-in">  taxa <span class="op">=</span> <span class="st">"SpeciesID"</span>,</span>
<span class="r-in">  traits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Body_length"</span>, <span class="st">"Body_width"</span>, <span class="st">"Body_height"</span>, <span class="st">"Thorax_length"</span>,</span>
<span class="r-in">    <span class="st">"Thorax_width"</span>, <span class="st">"Head_width"</span>, <span class="st">"Eye_width"</span>, <span class="st">"Antenna_Seg1"</span>, <span class="st">"Antenna_Seg2"</span>,</span>
<span class="r-in">    <span class="st">"Antenna_Seg3"</span>, <span class="st">"Antenna_Seg4"</span>, <span class="st">"Antenna_Seg5"</span>, <span class="st">"Front.Tibia_length"</span>,</span>
<span class="r-in">    <span class="st">"Mid.Tibia_length"</span>, <span class="st">"Hind.Tibia_length"</span>, <span class="st">"Front.Femur_length"</span>,</span>
<span class="r-in">    <span class="st">"Hind.Femur_length"</span>, <span class="st">"Front.Femur_width"</span>, <span class="st">"Hind.Femur_width"</span>,</span>
<span class="r-in">    <span class="st">"Rostrum_length"</span>, <span class="st">"Rostrum_width"</span>, <span class="st">"Wing_length"</span>, <span class="st">"Wing_widt"</span><span class="op">)</span>,</span>
<span class="r-in">  units <span class="op">=</span> <span class="st">"mm"</span>,</span>
<span class="r-in">  keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="st">"Sex"</span>, references <span class="op">=</span> <span class="st">"Source"</span>, lifestage <span class="op">=</span> <span class="st">"Wing_development"</span><span class="op">)</span>,</span>
<span class="r-in">  metadata <span class="op">=</span> <span class="fu"><a href="as.metadata.html">as.metadata</a></span><span class="op">(</span></span>
<span class="r-in">    author <span class="op">=</span> <span class="st">"Gossner MM, Simons NK, Höck L and Weisser WW"</span>,</span>
<span class="r-in">    datasetName <span class="op">=</span> <span class="st">"Morphometric traits Heteroptera"</span>,</span>
<span class="r-in">    bibliographicCitation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">heteroptera_raw</span><span class="op">)</span><span class="op">$</span><span class="va">citeAs</span>,</span>
<span class="r-in">    license <span class="op">=</span> <span class="st">"http://creativecommons.org/publicdomain/zero/1.0/"</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Florian D. Schneider.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

