<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Standardize format of traitdata — as.traitdata • traitdataform</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Standardize format of traitdata — as.traitdata" />
<meta property="og:description" content="Turns wide-table formats (species-traits matrix and occurrence table) into
long-table format. As input, the function requires information about which
columns contain traits, given as a list of trait-names, and which column
contains the taxon name. For tables containing repeated measurements of
traits within the same taxon, an occurrenceID should be given or will be
created." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">traitdataform</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/traitdataform.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ecologicaltraitdata/traitdataform/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Standardize format of traitdata</h1>
    <small class="dont-index">Source: <a href='https://github.com/ecologicaltraitdata/traitdataform/blob/master/R/as.traitdata.R'><code>R/as.traitdata.R</code></a></small>
    <div class="hidden name"><code>as.traitdata.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Turns wide-table formats (species-traits matrix and occurrence table) into
long-table format. As input, the function requires information about which
columns contain traits, given as a list of trait-names, and which column
contains the taxon name. For tables containing repeated measurements of
traits within the same taxon, an occurrenceID should be given or will be
created.</p>
    </div>

    <pre class="usage"><span class='fu'>as.traitdata</span><span class='op'>(</span>
  <span class='va'>x</span>,
  traits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>traits</span>,
  taxa <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>taxa</span>,
  occurrences <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>occurrences</span>,
  datasetID <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>datasetID</span>,
  measurements <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>measurements</span>,
  units <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>units</span>,
  keep <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>keep</span>,
  drop <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>drop</span>,
  na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>,
  id.vars <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>%in%</span> <span class='va'>keep</span> <span class='op'>&amp;</span> <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>%in%</span> <span class='va'>drop</span><span class='op'>]</span>,
  thesaurus <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>thesaurus</span>,
  metadata <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>$</span><span class='va'>metadata</span>,
  longtable <span class='op'>=</span> <span class='cn'>TRUE</span>,
  conformsTo <span class='op'>=</span> <span class='st'>"v0.10"</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>data.frame object, containing at least a column of taxa, and one or
more columns of trait measurements.</p></td>
    </tr>
    <tr>
      <th>traits</th>
      <td><p>a vector of column names containing traits.</p></td>
    </tr>
    <tr>
      <th>taxa</th>
      <td><p>the name of the column containing taxon names.</p></td>
    </tr>
    <tr>
      <th>occurrences</th>
      <td><p>either a column name containing identifiers for each
individual specimen on which several traits were measured, i.e. an
occurrence of this taxon, or a vector of occurrence identifiers which must
be of the same length as the number of rows of the table. See 'Details'.</p></td>
    </tr>
    <tr>
      <th>datasetID</th>
      <td><p>a unique name for this dataset (optional). Will be prepended
to the occurrence ID and measurement ID.</p></td>
    </tr>
    <tr>
      <th>measurements</th>
      <td><p>either a column name containing identifiers for each
individual measurement, or a vector of measurement identifiers. This
applies, if single trait measurements span across multiple columns of data,
e.g. multivariate traits like quantitative measures of chemical compounds,
wavelengths or x-y-z coordinates. In most cases, a measurementID will link
the data across rows in the longtable format. Make sure that the traitnames
given reflect the different dimensions of the trait measurement. If
<code>measurement</code> remains blank, sequential identifiers will be auto-generated
for each measured value.</p></td>
    </tr>
    <tr>
      <th>units</th>
      <td><p>a single character string or named vector giving the units that
apply to the traits. If only one unit type is given, it will be applied to
all traits.</p></td>
    </tr>
    <tr>
      <th>keep</th>
      <td><p>a vector or named vector containing the names of the input
columns to be kept in the output. Vector names will be used to rename the
columns. It is recommended to use accepted column names of the traitdata
standard for renaming!</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>a vector acting as the inverse of <code>keep</code>. All columns listed will
be removed from the output dataset.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical defaults to <code>TRUE</code>. If <code>FALSE</code>, all measured Values
containing NA will be kept in the output table. This is not reccomended for
most data.</p></td>
    </tr>
    <tr>
      <th>id.vars</th>
      <td><p>a vector of column names to return. Autogenerated from input
column names and 'keep' and 'drop'.</p></td>
    </tr>
    <tr>
      <th>thesaurus</th>
      <td><p>an object of class 'thesaurus' as created by function
<code><a href='as.thesaurus.html'>as.thesaurus()</a></code>. If provided, this will superimpose trait names provided
in argument <code>traits</code>. The thesaurus will be appended as an attribute and
can be revisited by calling <code>attributes(x)$thesaurus</code>.</p></td>
    </tr>
    <tr>
      <th>metadata</th>
      <td><p>a list of class metadata, as created by function
<code><a href='as.metadata.html'>as.metadata()</a></code>. Metadata will be added as attributes to the data table.
Possible parameters to the function call are: <code>rightsHolder</code>,
<code>bibliographicCitation</code>, <code>license</code>, <code>author</code>, <code>datasetID</code>, <code>datasetName</code>,
<code>version</code>. (see 'Details')</p></td>
    </tr>
    <tr>
      <th>longtable</th>
      <td><p>logical, defaults to <code>TRUE</code>. If <code>FALSE</code>, data will not be
converted into lontable format, but remain in widetable format as provided.
Note that any columns not indicated in arguments <code>traits</code>, <code>keep</code>, <code>units</code>,
<code>taxa</code>, <code>occurrences</code> will be dropped from the output.</p></td>
    </tr>
    <tr>
      <th>conformsTo</th>
      <td><p>version of the Ecological Trait-data Standard to which the
data conform. Default procedures return data conform to v0.10. If
<code>conformsTo = "v0.9"</code>, data output will be converted to Ecological
Trait-data Standard v0.9.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments, passed on to print function.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class 'traitdata'.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>occurrences</code> is left blank, the script will check for the
structure of the input table. If several entries are given for the same
taxon, it assumes that input is an occurrence table, i.e. with multiple
observations of a single taxon,  and assigns identifiers.</p>
<p>Metadata will be stored as attributes to the data frame and can be accessed
via <code><a href='https://rdrr.io/r/base/attributes.html'>attributes()</a></code>. It is not necessary but highly recommended to provide
metadata when working with multiple trait data files. When appending
datasets using <code><a href='https://rdrr.io/r/base/cbind.html'>rbind()</a></code>, the metadata information will be added as
additional columns and dataset attribution will be listed in attributes.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># species-trait matrix:</span>

<span class='fu'><a href='pulldata.html'>pulldata</a></span><span class='op'>(</span><span class='st'>"carabids"</span><span class='op'>)</span>

<span class='va'>dataset1</span> <span class='op'>&lt;-</span> <span class='fu'>as.traitdata</span><span class='op'>(</span><span class='va'>carabids</span>,
  taxa <span class='op'>=</span> <span class='st'>"name_correct"</span>,
  traits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"body_length"</span>, <span class='st'>"antenna_length"</span>, <span class='st'>"metafemur_length"</span><span class='op'>)</span>,
  units <span class='op'>=</span> <span class='st'>"mm"</span>,
  keep <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>basisOfRecordDecription <span class='op'>=</span> <span class='st'>"source_measurement"</span>, measurementRemark <span class='op'>=</span> <span class='st'>"note"</span><span class='op'>)</span>
  <span class='op'>)</span>

<span class='co'># occurrence table:</span>

<span class='fu'><a href='pulldata.html'>pulldata</a></span><span class='op'>(</span><span class='st'>"heteroptera_raw"</span><span class='op'>)</span>

<span class='va'>dataset2</span> <span class='op'>&lt;-</span> <span class='fu'>as.traitdata</span><span class='op'>(</span><span class='va'>heteroptera_raw</span>,
  taxa <span class='op'>=</span> <span class='st'>"SpeciesID"</span>,
  traits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Body_length"</span>, <span class='st'>"Body_width"</span>, <span class='st'>"Body_height"</span>, <span class='st'>"Thorax_length"</span>,
    <span class='st'>"Thorax_width"</span>, <span class='st'>"Head_width"</span>, <span class='st'>"Eye_width"</span>, <span class='st'>"Antenna_Seg1"</span>, <span class='st'>"Antenna_Seg2"</span>,
    <span class='st'>"Antenna_Seg3"</span>, <span class='st'>"Antenna_Seg4"</span>, <span class='st'>"Antenna_Seg5"</span>, <span class='st'>"Front.Tibia_length"</span>,
    <span class='st'>"Mid.Tibia_length"</span>, <span class='st'>"Hind.Tibia_length"</span>, <span class='st'>"Front.Femur_length"</span>,
    <span class='st'>"Hind.Femur_length"</span>, <span class='st'>"Front.Femur_width"</span>, <span class='st'>"Hind.Femur_width"</span>,
    <span class='st'>"Rostrum_length"</span>, <span class='st'>"Rostrum_width"</span>, <span class='st'>"Wing_length"</span>, <span class='st'>"Wing_widt"</span><span class='op'>)</span>,
  units <span class='op'>=</span> <span class='st'>"mm"</span>,
  keep <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>sex <span class='op'>=</span> <span class='st'>"Sex"</span>, references <span class='op'>=</span> <span class='st'>"Source"</span>, lifestage <span class='op'>=</span> <span class='st'>"Wing_development"</span><span class='op'>)</span>,
  metadata <span class='op'>=</span> <span class='fu'><a href='as.metadata.html'>as.metadata</a></span><span class='op'>(</span>
    author <span class='op'>=</span> <span class='st'>"Gossner MM, Simons NK, HÃ¶ck L and Weisser WW"</span>,
    datasetName <span class='op'>=</span> <span class='st'>"Morphometric traits Heteroptera"</span>,
    bibliographicCitation <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>heteroptera_raw</span><span class='op'>)</span><span class='op'>$</span><span class='va'>citeAs</span>,
    license <span class='op'>=</span> <span class='st'>"http://creativecommons.org/publicdomain/zero/1.0/"</span>
    <span class='op'>)</span>
<span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Florian D. Schneider.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


