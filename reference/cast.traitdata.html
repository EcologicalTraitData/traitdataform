<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Function to reformat trait data from the long-table into a matrix/wide-table
or occurrence table format."><title>Cast long-table trait data into wide-table format — cast.traitdata • traitdataform</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cast long-table trait data into wide-table format — cast.traitdata"><meta property="og:description" content="Function to reformat trait data from the long-table into a matrix/wide-table
or occurrence table format."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">traitdataform</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/traitdataform.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ecologicaltraitdata/traitdataform/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Cast long-table trait data into wide-table format</h1>
      <small class="dont-index">Source: <a href="https://github.com/ecologicaltraitdata/traitdataform/blob/HEAD/R/cast.traitdata.R" class="external-link"><code>R/cast.traitdata.R</code></a></small>
      <div class="d-none name"><code>cast.traitdata.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to reformat trait data from the long-table into a matrix/wide-table
or occurrence table format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">cast.traitdata</span><span class="op">(</span>
  <span class="va">.data</span>,
  values <span class="op">=</span> <span class="st">"verbatimTraitValue"</span>,
  traits <span class="op">=</span> <span class="st">"verbatimTraitName"</span>,
  units <span class="op">=</span> <span class="st">"verbatimTraitUnit"</span>,
  fun.aggregate <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>dataset of class 'traitdata' to be cast into wide-table format.</p></dd>
<dt>values</dt>
<dd><p>the column name containing the trait values to be used to fill
the matrix (default is <code>verbatimTraitValue</code>). Duplicate columns (e.g.
<code>traitValue</code>) will be omitted. See notes.</p></dd>
<dt>traits</dt>
<dd><p>the column name to be kept for parsing into wide-table (default
is <code>verbatimTraitName</code>). Note that any duplicate column that contains trait names,
e.g. <code>traitName</code> will be omitted.</p></dd>
<dt>units</dt>
<dd><p>the column name containing the units of numerical values
(default is <code>verbatimTraitUnit</code>).</p></dd>
<dt>fun.aggregate</dt>
<dd><p>option for <code><a href="https://rdrr.io/pkg/reshape2/man/cast.html" class="external-link">reshape2::cast()</a></code> to define method of
aggregation.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a wide-table data.frame object containing all taxa (and other
differentiating parameters) in rows and all traits (extracted from column
'verbatimTraitName') in columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The wide-table will be composed while preserving the detail given in
the dataset (occurrence level or taxa level). The cells  will be filled
with the values from 'verbatimTraitValue'.</p>
<p>If taxa should be summarized, provide function for summarizing in parameter
'summarize'. This can be any function that takes a vector and returns a
single value for <strong>both numerical and factorial/character input vectors!</strong>.
The default for numerical values is to return an arithmetric mean while
including any outliers. For factorial values, the value is accepted if it
is equal in all of the input entries. Otherwise NA is returned. For
heterogeneous factorial or character input, user action is required for
homogenizing the data before calling <code>cast.traitdata()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="duplicate-columns">Duplicate columns<a class="anchor" aria-label="anchor" href="#duplicate-columns"></a></h2>
    <p>The function is currently not able to handle
multiple columns of trait data (incl. names and units). Those are currently
omitted from the output and may be added manually. You can alter the
columns to be used to construct the matrix by specifying those in
parameters <code>traits</code>, <code>values</code>, and <code>units</code>. Automatic handling of the <code>Std</code>
columns might be added at a later stage.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="pulldata.html">pulldata</a></span><span class="op">(</span><span class="st">"arthropodtraits"</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Direct call to data source failed. Please check internet connectivity and re-load data!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The dataset 'arthropodtraits' has successfully been downloaded! </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">arthropodtraits</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Order     Suborder       Family            SpeciesID             Author</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Araneae Labidognatha Anyphaenidae Anyphaena accentuata (Walckenaer, 1802)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Araneae Labidognatha    Araneidae Aculepeira ceropegia   Walckenaer, 1802</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Araneae Labidognatha    Araneidae     Agalenatea redii    (Scopoli, 1763)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Araneae Labidognatha    Araneidae   Araneus diadematus       Clerck, 1757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Araneae Labidognatha    Araneidae    Araneus marmoreus       Clerck, 1757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Araneae Labidognatha    Araneidae    Araneus quadratus       Clerck, 1757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Body_Size Dispersal_ability Feeding_guild Feeding_guild_short Feeding_mode</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      6.25              1.00             c                   c            e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     11.00              1.00             c                   c            e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      6.93              0.50             c                   c            e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     11.88              1.00             c                   c            e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     10.03              0.75             c                   c            e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     12.25              1.00             c                   c            e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Feeding_specialization Feeding_tissue Feeding_plant_part</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Endophagous_lifestyle Stratum_use Stratum_use_short Remark</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                  &lt;NA&gt;           t                 t       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                  &lt;NA&gt;           h                 h       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                  &lt;NA&gt;           h                 h       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                  &lt;NA&gt;       (h)-t                 u       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                  &lt;NA&gt;       (h)-t                 u       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                  &lt;NA&gt;       (h)-t                 u       </span>
<span class="r-in"><span class="va">dataset3</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.traitdata.html">as.traitdata</a></span><span class="op">(</span><span class="va">arthropodtraits</span>,</span>
<span class="r-in">                         taxa <span class="op">=</span> <span class="st">"SpeciesID"</span>,</span>
<span class="r-in">                         traits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Body_Size"</span>, <span class="st">"Dispersal_ability"</span>,</span>
<span class="r-in">                               <span class="st">"Feeding_guild"</span>,<span class="st">"Feeding_guild_short"</span>,</span>
<span class="r-in">                               <span class="st">"Feeding_mode"</span>, <span class="st">"Feeding_specialization"</span>,</span>
<span class="r-in">                               <span class="st">"Feeding_tissue"</span>, <span class="st">"Feeding_plant_part"</span>,</span>
<span class="r-in">                               <span class="st">"Endophagous_lifestyle"</span>, <span class="st">"Stratum_use"</span>,</span>
<span class="r-in">                               <span class="st">"Stratum_use_short"</span><span class="op">)</span>,</span>
<span class="r-in">                         units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Body_Size <span class="op">=</span> <span class="st">"mm"</span><span class="op">)</span>,</span>
<span class="r-in">                         keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>measurementRemark <span class="op">=</span> <span class="st">"Remark"</span><span class="op">)</span>,</span>
<span class="r-in">                         metadata <span class="op">=</span> <span class="fu"><a href="as.metadata.html">as.metadata</a></span><span class="op">(</span></span>
<span class="r-in">                            license <span class="op">=</span> <span class="st">"http://creativecommons.org/publicdomain/zero/1.0/"</span></span>
<span class="r-in">                            <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Input is taken to be a species -- trait matrix. If this is not the case, please provide parameters!</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataset3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   verbatimScientificName verbatimTraitName verbatimTraitValue verbatimTraitUnit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   Anyphaena accentuata         Body_Size               6.25                mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Aculepeira ceropegia         Body_Size                 11                mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       Agalenatea redii         Body_Size               6.93                mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     Araneus diadematus         Body_Size              11.88                mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Araneus marmoreus         Body_Size              10.03                mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Araneus quadratus         Body_Size              12.25                mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurementID measurementRemark</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             1                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2             2                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3             3                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4             4                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             5                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6             6                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This trait-dataset contains 11 traits for 1230 taxa ( 10238 measurements in total).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [ ] : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     When using these data, you must acknowledge the following usage policies: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Published under: http://creativecommons.org/publicdomain/zero/1.0/ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     This dataset conforms to: [1] "Ecological Trait-data Standard (ETS) v0.10"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">dd3</span> <span class="op">&lt;-</span><span class="fu">cast.traitdata</span><span class="op">(</span><span class="va">dataset3</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dd3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      verbatimScientificName measurementRemark Body_Size Dispersal_ability</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          Acalypta nigrina                    2.6 [mm]              0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Acalypta parvula                    2.0 [mm]              0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      Acalypta platycheila                    2.6 [mm]              0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         Acalyptus carpini                 *  2.2 [mm]                 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Acanthodelphax denticauda                    3.0 [mm]               0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Acanthodelphax spinosus                    2.0 [mm]                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Endophagous_lifestyle Feeding_guild Feeding_guild_short Feeding_mode</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                  &lt;NA&gt;             h                   h            s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                  &lt;NA&gt;             h                   h            s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                  &lt;NA&gt;             h                   h            s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                  &lt;NA&gt;             h                   h            c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                  &lt;NA&gt;             h                   h            s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                  &lt;NA&gt;             h                   h            s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Feeding_plant_part Feeding_specialization Feeding_tissue Stratum_use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               &lt;NA&gt;                      o              m           g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               &lt;NA&gt;                      o              m           g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               &lt;NA&gt;                      o              m           g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                l-r                      m           &lt;NA&gt;           t</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               &lt;NA&gt;                      m              p           h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6               &lt;NA&gt;                      m              p           h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Stratum_use_short</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                 t</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                 h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                 h</span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Florian D. Schneider.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

