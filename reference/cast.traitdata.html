<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cast long-table trait data into wide-table format — cast.traitdata • traitdataform</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Cast long-table trait data into wide-table format — cast.traitdata" />
<meta property="og:description" content="Function to reformat trait data from the long-table into a matrix/wide-table
or occurrence table format." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">traitdataform</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/traitdataform.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ecologicaltraitdata/traitdataform/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cast long-table trait data into wide-table format</h1>
    <small class="dont-index">Source: <a href='https://github.com/ecologicaltraitdata/traitdataform/blob/master/R/cast.traitdata.R'><code>R/cast.traitdata.R</code></a></small>
    <div class="hidden name"><code>cast.traitdata.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to reformat trait data from the long-table into a matrix/wide-table
or occurrence table format.</p>
    </div>

    <pre class="usage"><span class='fu'>cast.traitdata</span><span class='op'>(</span>
  <span class='va'>.data</span>,
  values <span class='op'>=</span> <span class='st'>"verbatimTraitValue"</span>,
  traits <span class='op'>=</span> <span class='st'>"verbatimTraitName"</span>,
  units <span class='op'>=</span> <span class='st'>"verbatimTraitUnit"</span>,
  fun.aggregate <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>dataset of class 'traitdata' to be cast into wide-table format.</p></td>
    </tr>
    <tr>
      <th>values</th>
      <td><p>the column name containing the trait values to be used to fill
the matrix (default is <code>verbatimTraitValue</code>). Duplicate columns (e.g.
<code>traitValue</code>) will be omitted. See notes.</p></td>
    </tr>
    <tr>
      <th>traits</th>
      <td><p>the column name to be kept for parsing into wide-table (default
is <code>verbatimTraitName</code>). Note that any duplicate column that contains trait names,
e.g. <code>traitName</code> will be omitted.</p></td>
    </tr>
    <tr>
      <th>units</th>
      <td><p>the column name containing the units of numerical values
(default is <code>verbatimTraitUnit</code>).</p></td>
    </tr>
    <tr>
      <th>fun.aggregate</th>
      <td><p>option for <code><a href='https://rdrr.io/pkg/reshape2/man/cast.html'>reshape2::cast()</a></code> to define method of
aggregation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a wide-table data.frame object containing all taxa (and other
differentiating parameters) in rows and all traits (extracted from column
'verbatimTraitName') in columns.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The wide-table will be composed while preserving the detail given in
the dataset (occurrence level or taxa level). The cells  will be filled
with the values from 'verbatimTraitValue'.</p>
<p>If taxa should be summarized, provide function for summarizing in parameter
'summarize'. This can be any function that takes a vector and returns a
single value for <strong>both numerical and factorial/character input vectors!</strong>.
The default for numerical values is to return an arithmetric mean while
including any outliers. For factorial values, the value is accepted if it
is equal in all of the input entries. Otherwise NA is returned. For
heterogeneous factorial or character input, user action is required for
homogenizing the data before calling <code>cast.traitdata()</code>.</p>
    <h2 class="hasAnchor" id="duplicate-columns"><a class="anchor" href="#duplicate-columns"></a>Duplicate columns</h2>

    <p>The function is currently not able to handle
multiple columns of trait data (incl. names and units). Those are currently
omitted from the output and may be added manually. You can alter the
columns to be used to construct the matrix by specifying those in
parameters <code>traits</code>, <code>values</code>, and <code>units</code>. Automatic handling of the <code>Std</code>
columns might be added at a later stage.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='pulldata.html'>pulldata</a></span><span class='op'>(</span><span class='st'>"arthropodtraits"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Direct call to data source failed. Please check internet connectivity and re-load data!</span></div><div class='output co'>#&gt; <span class='message'>The dataset 'arthropodtraits' has successfully been downloaded! </span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>arthropodtraits</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     Order     Suborder       Family            SpeciesID             Author
#&gt; 1 Araneae Labidognatha Anyphaenidae Anyphaena accentuata (Walckenaer, 1802)
#&gt; 2 Araneae Labidognatha    Araneidae Aculepeira ceropegia   Walckenaer, 1802
#&gt; 3 Araneae Labidognatha    Araneidae     Agalenatea redii    (Scopoli, 1763)
#&gt; 4 Araneae Labidognatha    Araneidae   Araneus diadematus       Clerck, 1757
#&gt; 5 Araneae Labidognatha    Araneidae    Araneus marmoreus       Clerck, 1757
#&gt; 6 Araneae Labidognatha    Araneidae    Araneus quadratus       Clerck, 1757
#&gt;   Body_Size Dispersal_ability Feeding_guild Feeding_guild_short Feeding_mode
#&gt; 1      6.25              1.00             c                   c            e
#&gt; 2     11.00              1.00             c                   c            e
#&gt; 3      6.93              0.50             c                   c            e
#&gt; 4     11.88              1.00             c                   c            e
#&gt; 5     10.03              0.75             c                   c            e
#&gt; 6     12.25              1.00             c                   c            e
#&gt;   Feeding_specialization Feeding_tissue Feeding_plant_part
#&gt; 1                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;
#&gt; 2                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;
#&gt; 3                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;
#&gt; 4                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;
#&gt; 5                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;
#&gt; 6                   &lt;NA&gt;           &lt;NA&gt;               &lt;NA&gt;
#&gt;   Endophagous_lifestyle Stratum_use Stratum_use_short Remark
#&gt; 1                  &lt;NA&gt;           t                 t       
#&gt; 2                  &lt;NA&gt;           h                 h       
#&gt; 3                  &lt;NA&gt;           h                 h       
#&gt; 4                  &lt;NA&gt;       (h)-t                 u       
#&gt; 5                  &lt;NA&gt;       (h)-t                 u       
#&gt; 6                  &lt;NA&gt;       (h)-t                 u       </div><div class='input'><span class='va'>dataset3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='as.traitdata.html'>as.traitdata</a></span><span class='op'>(</span><span class='va'>arthropodtraits</span>,
                         taxa <span class='op'>=</span> <span class='st'>"SpeciesID"</span>,
                         traits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Body_Size"</span>, <span class='st'>"Dispersal_ability"</span>,
                               <span class='st'>"Feeding_guild"</span>,<span class='st'>"Feeding_guild_short"</span>,
                               <span class='st'>"Feeding_mode"</span>, <span class='st'>"Feeding_specialization"</span>,
                               <span class='st'>"Feeding_tissue"</span>, <span class='st'>"Feeding_plant_part"</span>,
                               <span class='st'>"Endophagous_lifestyle"</span>, <span class='st'>"Stratum_use"</span>,
                               <span class='st'>"Stratum_use_short"</span><span class='op'>)</span>,
                         units <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>Body_Size <span class='op'>=</span> <span class='st'>"mm"</span><span class='op'>)</span>,
                         keep <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>measurementRemark <span class='op'>=</span> <span class='st'>"Remark"</span><span class='op'>)</span>,
                         metadata <span class='op'>=</span> <span class='fu'><a href='as.metadata.html'>as.metadata</a></span><span class='op'>(</span>
                            license <span class='op'>=</span> <span class='st'>"http://creativecommons.org/publicdomain/zero/1.0/"</span>
                            <span class='op'>)</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Input is taken to be a species -- trait matrix. If this is not the case, please provide parameters!</span></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dataset3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   verbatimScientificName verbatimTraitName verbatimTraitValue verbatimTraitUnit
#&gt; 1   Anyphaena accentuata         Body_Size               6.25                mm
#&gt; 2   Aculepeira ceropegia         Body_Size                 11                mm
#&gt; 3       Agalenatea redii         Body_Size               6.93                mm
#&gt; 4     Araneus diadematus         Body_Size              11.88                mm
#&gt; 5      Araneus marmoreus         Body_Size              10.03                mm
#&gt; 6      Araneus quadratus         Body_Size              12.25                mm
#&gt;   measurementID measurementRemark
#&gt; 1             1                  
#&gt; 2             2                  
#&gt; 3             3                  
#&gt; 4             4                  
#&gt; 5             5                  
#&gt; 6             6                  
#&gt; 
#&gt; This trait-dataset contains 11 traits for 1230 taxa ( 10238 measurements in total).
#&gt; 
#&gt; [ ] : 
#&gt;     When using these data, you must acknowledge the following usage policies: 
#&gt; 
#&gt;     Published under: http://creativecommons.org/publicdomain/zero/1.0/ 
#&gt; 
#&gt;     This dataset conforms to: [1] "Ecological Trait-data Standard (ETS) v0.10"
#&gt; </div><div class='input'>
<span class='va'>dd3</span> <span class='op'>&lt;-</span><span class='fu'>cast.traitdata</span><span class='op'>(</span><span class='va'>dataset3</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dd3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      verbatimScientificName measurementRemark Body_Size Dispersal_ability
#&gt; 1          Acalypta nigrina                    2.6 [mm]              0.25
#&gt; 2          Acalypta parvula                    2.0 [mm]              0.25
#&gt; 3      Acalypta platycheila                    2.6 [mm]              0.25
#&gt; 4         Acalyptus carpini                 *  2.2 [mm]                 1
#&gt; 5 Acanthodelphax denticauda                    3.0 [mm]               0.5
#&gt; 6   Acanthodelphax spinosus                    2.0 [mm]                 0
#&gt;   Endophagous_lifestyle Feeding_guild Feeding_guild_short Feeding_mode
#&gt; 1                  &lt;NA&gt;             h                   h            s
#&gt; 2                  &lt;NA&gt;             h                   h            s
#&gt; 3                  &lt;NA&gt;             h                   h            s
#&gt; 4                  &lt;NA&gt;             h                   h            c
#&gt; 5                  &lt;NA&gt;             h                   h            s
#&gt; 6                  &lt;NA&gt;             h                   h            s
#&gt;   Feeding_plant_part Feeding_specialization Feeding_tissue Stratum_use
#&gt; 1               &lt;NA&gt;                      o              m           g
#&gt; 2               &lt;NA&gt;                      o              m           g
#&gt; 3               &lt;NA&gt;                      o              m           g
#&gt; 4                l-r                      m           &lt;NA&gt;           t
#&gt; 5               &lt;NA&gt;                      m              p           h
#&gt; 6               &lt;NA&gt;                      m              p           h
#&gt;   Stratum_use_short
#&gt; 1                 g
#&gt; 2                 g
#&gt; 3                 g
#&gt; 4                 t
#&gt; 5                 h
#&gt; 6                 h</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Florian D. Schneider.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


